<div id="featured" class="featured">
  <div class="container">
    <div class="featured__title">Featured Products</div>
    <div class="featured__cards">
      {% if cart.items.size > 0 %}
        {% assign products = cart.items %}
        {% assign product_titles = products | map: 'product_id' %}

        {% for product in collections.all.products %}
          {% if product_titles contains product.id %}
          {% else %}
            {% render 'product-card'
              , product: product %}
          {% endif %}
        {% endfor %}
      {% else %}
        {% for product in collections.all.products %}
          {% render 'product-card'
            , product: product %}
        {% endfor %}
      {% endif %}

    </div>
  </div>
</div>


{% schema %}
  {
    "name": "Featured Products",
    "settings": [
      {
        "type": "collection",
        "id": "collection",
        "label": "Collection"
      }
    ]
  }
{% endschema %}